apply plugin: 'application'
apply plugin: 'groovy'
apply plugin: 'idea'
apply plugin: 'project-report'

repositories {
    mavenCentral()
}

dependencies {
    compile('org.codehaus.groovy:groovy-all:2.2.1')

    testCompile('org.spockframework:spock-core:0.7-groovy-2.0')
}

sourceSets {
    ast {
        groovy {
            srcDirs = ['src/ast/groovy']
        }
    }
}

idea {
    project {
        jdkName '1.7'
        languageLevel '1.7'
    }
    module {
        sourceDirs += file('src/ast/groovy')
    }
}

task compileAst(type: GroovyCompile) {
    source = sourceSets.ast.allGroovy
    destinationDir = compileGroovy.destinationDir
    classpath = compileGroovy.classpath
}

compileGroovy.dependsOn compileAst

mainClassName = 'com.cholick.main.Main'
